/*CREATE DATABASE FOR ADMIN*/
/* ARONOCK 10/07/2022 */

CREATE DATABASE RMS;
USE RMS
CREATE TABLE ADMIN(
	A_ID VARCHAR(255) PRIMARY KEY,
	NAME VARCHAR(255) NOT NULL,
	PHONE_NUMBER VARCHAR(255) NOT NULL,
	PASSWORD VARCHAR(255) NOT NULL,
);
/*INSERT DEFAULT VALUE FOR ADMIN ADMIN*/

USE RMS
INSERT INTO ADMIN
VALUES('00000000','ADMIN','00000000','11111111')
SELECT * FROM ADMIN;

/*CREATE DATABASE FOR ADMIN*/
CREATE DATABASE RMS;
USE RMS
CREATE TABLE ADMIN(
	A_ID VARCHAR(255) PRIMARY KEY,
	NAME VARCHAR(255) NOT NULL,
	PHONE_NUMBER VARCHAR(255) NOT NULL,
	PASSWORD VARCHAR(255) NOT NULL,
);
/*INSERT DEFAULT VALUE FOR ADMIN ADMIN*/
USE RMS
INSERT INTO ADMIN
VALUES('00000000','ADMIN','00000000','11111111')
SELECT * FROM ADMIN;


/*CREATE TABLE FOR CUSTOMER*/
/*ARONOCK 10/07/22 */
USE RMS
CREATE TABLE CUSTOMER(
	CUSTOMER_ID VARCHAR(255) PRIMARY KEY,
	NAME VARCHAR(255) NOT NULL,
	PHONE_NO VARCHAR(225) NOT NULL,
	ADDRESS VARCHAR(225)
);
/*DEFAULT CUSTOMER*/
INSERT INTO CUSTOMER
VALUES('00000000','UNKNOWN','00000000','DHAKA');
SELECT * FROM CUSTOMER;

/*FORGET TO ADD PASSWORD*/
ALTER TABLE CUSTOMER
ADD PASSWORD VARCHAR(225);
/*UPDATE PASSWORD FOR DEFAULT CUSTOMER*/
UPDATE CUSTOMER SET PASSWORD ='11111111' WHERE
CUSTOMER_ID='00000000';

/*CREATE DATABASE FOR FOOD MENU*/
/*10/07/022 ARONOCK*/
USE RMS
CREATE TABLE FOOD_MENU(
	DISH_ID VARCHAR(255) PRIMARY KEY,
	DISH_NAME VARCHAR(255),
	CATEGORY VARCHAR(255),
	SPICINESS VARCHAR(255),
	PRICE INT
);
INSERT INTO FOOD_MENU
VALUES('01','Chicken Burger','Chicken','Mild',149);

SELECT * FROM FOOD_MENU
 
/*TURN ON NOCOUNT*/
GO  
SET NOCOUNT ON;


/*TABLE FOR EMPLOYEE*/
/* ARONOCK 11/07/2022 */

CREATE TABLE EMPLOYEE(
E_ID VARCHAR (255) PRIMARY KEY,
NAME VARCHAR (255),
PHONE_NUMBER VARCHAR(255),
PASSWORD VARCHAR(255),
STATUS VARCHAR (255)
);
/*DEFAULT EMPLOYEE*/
INSERT INTO EMPLOYEE
VALUES('00000000','UNKNOWN','00000000','11111111','SERVER');

SELECT * FROM EMPLOYEE;


/*TABLE FOR CASHIER*/
/* ARONOCK 11/07/2022 */
CREATE TABLE CASHIER(
C_ID VARCHAR (255) PRIMARY KEY,
NAME VARCHAR (255),
PHONE_NUMBER VARCHAR(255),
PASSWORD VARCHAR(255)
);
/*DEFAULT CASHIER*/
INSERT INTO CASHIER
VALUES('00000000','UNKNOWN','00000000','11111111');

SELECT * FROM CASHIER;


/*TABLE FOR MANEGER*/
/* ARONOCK 11/07/2022*/
CREATE TABLE MANEGER(
M_ID VARCHAR (255) PRIMARY KEY,
NAME VARCHAR (255),
PHONE_NUMBER VARCHAR(255),
PASSWORD VARCHAR(255)
);
/*DEFAULT MANEGER*/
INSERT INTO MANEGER
VALUES('00000000','UNKNOWN','00000000','11111111');

SELECT * FROM MANEGER;


/*CREATE TEMP BILL */

CREATE TABLE TEMP_BILL(
ITEM VARCHAR(255),
QUANTITY INT,
UNIT_PRICE INT,
TOTAL INT
);

/*CREATE BILLS TABLE*/
CREATE TABLE BILLS(
	BILL_ID INT IDENTITY(1,1) PRIMARY KEY,
	CUSTOMER_ID VARCHAR(255),
	FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID),
	E_ID VARCHAR(255),
	FOREIGN KEY(E_ID) REFERENCES EMPLOYEE(E_ID),
	C_ID VARCHAR(255),
	FOREIGN KEY(C_ID) REFERENCES CASHIER(C_ID),
	PAID INT,
	PAYMENT_METHOD VARCHAR(255),
	YEAR INT,
	MONTH INT,
	TIME VARCHAR(255)
	
);


/*TABLE BOOKING DETAIL*/
CREATE TABLE TABLE_S(
	BOOK_NO INT IDENTITY(1,1) PRIMARY KEY,
	BILL_ID INT,
	FOREIGN KEY(BILL_ID) REFERENCES BILLS(BILL_ID),
	E_ID VARCHAR(255),
	FOREIGN KEY(E_ID) REFERENCES EMPLOYEE(E_ID),
	TABLE_NO VARCHAR(255),
	CUSTOMER_ID VARCHAR(255),
	FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID),
	DATE VARCHAR(255)
);

ALTER TABLE CUSTOMER
ADD CREDIT INT;

/*DELETED OLD TABLE*/
USE RMS
DROP TABLE TABLE_S;
/*NEW TABLE_S*/
CREATE TABLE TABLE_S(
	BOOK_NO INT IDENTITY(1,1) PRIMARY KEY,
	E_ID VARCHAR(255),
	FOREIGN KEY(E_ID) REFERENCES EMPLOYEE(E_ID),
	TABLE_NO VARCHAR(255),
	CUSTOMER_ID VARCHAR(255),
	FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID),
	DATE VARCHAR(255)
);

/*TABLE FOR ONLIE ORDER*/

USE RMS
CREATE TABLE ONLINE_ORDER(
CUSTOMER_ID VARCHAR(255) PRIMARY KEY,
NAME VARCHAR(255),
FOOD_LIST VARCHAR(MAX),
IS_CHECKED VARCHAR(10),
TOTAL_PRICE INT,
DATE VARCHAR(255),
TIME VARCHAR(255)
);

USE RMS
ALTER TABLE ONLINE_ORDER
ADD ADDRESS VARCHAR(255);


USE RMS
ALTER TABLE ONLINE_ORDER
ADD PHONE_NUMBER VARCHAR(255);

/*adding new colm*/
ALTER TABLE ONLINE_ORDER
ADD paymentMethod varchar(255);


/* new table for notification*/
create table notification(
	_from varchar(255),
	_to varchar(255),
	_comment varchar(max)
);


/*NEW TABLE FOR GALLERY*/
CREATE TABLE GALLERY(
ID INT IDENTITY(101,1),
FOOD_NAME VARCHAR(255),
IMG_PATH VARCHAR(MAX)
);

/*NEW TABLE FOR SALARY*/
CREATE TABLE SALARY(
	A_ID VARCHAR(255),
	E_ID VARCHAR(255),
	C_ID VARCHAR(255),
	M_ID VARCHAR(255),
	SALARY VARCHAR(255)
	FOREIGN KEY(A_ID) REFERENCES ADMIN(A_ID),
	FOREIGN KEY(E_ID) REFERENCES EMPLOYEE(E_ID),
	FOREIGN KEY(C_ID) REFERENCES CASHIER(C_ID),
	FOREIGN KEY(M_ID) REFERENCES MANEGER(M_ID)
);

/* OLD ONLINE_ORDER TABLE HAS BEEN DELETED(MANUALLY)*/
/*NEW ONLINE_ORDER TABLE HAS BEEN CREATED*/
CREATE TABLE ONLINE_ORDER(
CUSTOMER_ID VARCHAR(255),
NAME VARCHAR(255),
FOOD_LIST VARCHAR(MAX),
IS_CHECKED VARCHAR(10),
TOTAL_PRICE INT,
DATE VARCHAR(255),
TIME VARCHAR(255)
FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID)
);

USE RMS
ALTER TABLE ONLINE_ORDER
ADD ADDRESS VARCHAR(255);


USE RMS
ALTER TABLE ONLINE_ORDER
ADD PHONE_NUMBER VARCHAR(255);

/*adding new colm*/
ALTER TABLE ONLINE_ORDER
ADD paymentMethod varchar(255);
